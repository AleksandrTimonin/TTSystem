

<div>
    <nav class="navbar navbar-expand-lg navbar-light bg-light" ng-show="isAllowed('EMPLOYEE')">
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item" ng-show="isAllowed('EXECUTOR')||isAllowed('MANAGER')">
                    <a class="nav-link" href="#!/income">Все заявки</a>
                </li>
                <li class="nav-item" ng-show="isAllowed('EXECUTOR')||isAllowed('MANAGER')">
                    <a class="nav-link" href="#!/assigned">Назначеные заявки</a>
                </li>
                <li class="nav-item" ng-show="isAllowed('SENIOR')">
                    <a class="nav-link" href="#!/statistics">Статистика</a>
                </li>
                <li class="nav-item" ng-show="isAllowed('ADMIN')">
                    <a class="nav-link" href="#!/admin">Администрирование</a>
                </li>
            </ul>


        </div>

    </nav>
    <p></p>
    <h3>Все заявки</h3>
    <p></p>
    <div ng-show="isAllowed('EMPLOYEE')">
        <div class="accordion accordion-flush" id="accordion"  ng-repeat="o in OrdersPage.content">
            <div class="accordion-item">
                <h2 class="accordion-header" id="fh{{o.id}}">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#fc{{o.id}}" aria-expanded="false" aria-controls="fc{{o.id}}">
                        {{o.id}} : {{o.username}} : {{o.title}}
                    </button>
                </h2>
                <div id="fc{{o.id}}" class="accordion-collapse collapse" aria-labelledby="fh{{o.id}}" data-bs-parent="#accordion">
                    <div class="accordion-body">
                        <table class="table table-primary table-borderless">
                            <thead>
                            <tr>

                                <th scope="col" colspan="4" class="table-active">Описание</th>

                            </tr>
                            </thead>
                            <tbody>
                            <tr>

                                <td colspan="4" class="table-active">{{o.description}}</td>
                            </tr>
                            </tbody>
                            <thead>
                            <tr>
                                <th scope="col">ID</th>
                                <th scope="col">Пользователь</th>
                                <th scope="col">Заголовок</th>
                                <th scope="col">Статус</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{o.id}}</td>
                                <td>
                                    <button class="btn btn-warning" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight{{o.id}}" ng-click="loadUsersInfo(o.username)" aria-controls="offcanvasRight{{o.id}}">{{o.username}}</button>
                                </td>
                                <td>{{o.title}}</td>
                                <td>{{o.status}}</td>
                            </tr>
                            </tbody>>
                            <thead>
                            <tr>
                                <th scope="col">Создан</th>
                                <th scope="col">Назначен</th>
                                <th scope="col">Принят</th>
                                <th scope="col">Закрыт</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{o.createdAt}}</td>
                                <td>{{o.assignment}}</td>
                                <td>{{o.startProgress}}</td>
                                <td>{{o.executed}}</td>
                            </tr>
                            </tbody>
                            <thead>
                            <tr>
                                <th scope="col" colspan="4" class="table-active">Исполнители</th>

                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td colspan="4" class="table-active">{{o.executor}}</td>
                            </tr>
                            </tbody>
                            <thead>
                            <tr>
                                <th scope="col" colspan="4" class="table-active">Комментарий сотрудника (не виден пользователю)</th>

                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td colspan="4" class="table-active">{{o.executorCommit}}</td>
                            </tr>
                            </tbody>
                        </table>
                        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight{{o.id}}" aria-labelledby="offcanvasRightLabel">
                            <div class="offcanvas-header">
                                <h5 id="offcanvasRightLabel{{o.id}}">О пользователе</h5>
                                <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                            </div>
                            <div class="offcanvas-body">
                                <table class="table">

                                    <tbody>
                                    <tr>
                                        <th scope="row">Имя</th>
                                        <td>{{currentUser.firstName}}</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">Фамилия</th>
                                        <td>{{currentUser.lastName}}</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">Отчество</th>
                                        <td>{{currentUser.patronymic}}</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">Почта</th>
                                        <td>{{currentUser.email}}</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">Телефон</th>
                                        <td>{{currentUser.phone}}</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">username</th>
                                        <td>{{currentUser.username}}</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">компания</th>
                                        <td>{{currentUser.company}}</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">корпус</th>
                                        <td>{{currentUser.building}}</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">офис</th>
                                        <td>{{currentUser.office}}</td>
                                    </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <p></p>
    <div>
        <nav aria-label="Page navigation">
            <ul class="pagination">
                <li class="page-item" ng-repeat="pageIndex in paginationArray">
                    <button class="page-link" ng-click="loadOrders(pageIndex)">{{pageIndex}}</button>
                </li>
            </ul>
        </nav>
    </div>
</div>

